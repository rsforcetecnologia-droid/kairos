<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Super Admin - Kairos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            display: none; /* Evita flash de conteúdo */
            background-color: #f8fafc; /* bg-slate-50 */
        }
        
        /* --- SCROLLBAR PERSONALIZADA (Fina e discreta) --- */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .modal {
            display: none;
            transition: opacity 0.3s ease;
            z-index: 100;
        }
        .modal.flex { display: flex; }

        /* --- LAYOUT E SIDEBAR MODERNIZADA --- */
        #fixed-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 4rem; /* h-16 (64px) - Mais compacto */
            z-index: 30;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid #e2e8f0;
        }
        
        #sidebar {
            width: 5rem; /* 80px colapsado */
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: fixed;
            top: 0; /* Sidebar vai até o topo agora, estilo moderno */
            left: 0;
            height: 100vh;
            z-index: 40;
            background-color: #0f172a; /* slate-900 */
            box-shadow: 4px 0 24px rgba(0,0,0,0.05);
        }

        #main-content-wrapper {
            margin-left: 5rem;
            transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding-top: 4rem; /* Espaço do header */
            width: calc(100% - 5rem);
            min-height: 100vh;
        }

        /* Estado Expandido */
        #sidebar.expanded {
            width: 17rem; /* 272px */
        }
        #sidebar.expanded + #main-content-wrapper {
            margin-left: 17rem;
            width: calc(100% - 17rem);
        }

        /* Esconder textos quando colapsado */
        #sidebar:not(.expanded) .sidebar-text,
        #sidebar:not(.expanded) .group-label,
        #sidebar:not(.expanded) .sidebar-logo-text {
            opacity: 0;
            pointer-events: none;
            width: 0;
            overflow: hidden;
            display: none; /* Garante que não ocupe espaço */
        }
        
        /* Centralizar ícones quando colapsado */
        #sidebar:not(.expanded) .sidebar-link {
            justify-content: center;
            padding-left: 0;
            padding-right: 0;
        }
        
        /* Ajuste do botão de toggle */
        #sidebarToggle {
            position: absolute;
            right: -12px;
            top: 48px;
            background: white;
            border: 1px solid #e2e8f0;
            color: #64748b;
            border-radius: 50%;
            padding: 4px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.3s, color 0.2s;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
        }
        #sidebarToggle:hover { color: #4f46e5; }
        #sidebar.expanded #sidebarToggle { transform: rotate(180deg); }

        /* Checkbox e Toggle Personalizados (UI) */
        .dot { transition: transform .2s ease-in-out; }
        input[type="checkbox"]:checked ~ .dot { transform: translateX(100%); }
        input[type="checkbox"]:checked ~ .toggle-bg { background-color: #4f46e5; }
        .toggle-bg:after {
            content: ''; position: absolute; top: 2px; left: 2px; background: white;
            width: 1.25rem; height: 1.25rem; border-radius: 9999px; transition: transform 0.2s ease-in-out;
        }
        input:checked + .toggle-bg:after { transform: translateX(100%); }
        
        /* Animações */
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fade-in-up 0.4s ease-out forwards; }
    </style>
  <script type="module" crossorigin src="/assets/admin-DgDovGK1.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/modulepreload-polyfill-B5Qt9EMX.js">
</head>
<body class="bg-slate-50 text-slate-800">

    <aside id="sidebar" class="flex flex-col text-slate-400 transition-all duration-300">
        
        <button id="sidebarToggle">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
        </button>

        <div class="h-16 flex items-center px-6 border-b border-slate-800/50 shrink-0">
            <div class="flex items-center gap-3 overflow-hidden whitespace-nowrap">
                <div class="w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white font-bold shrink-0 shadow-lg shadow-indigo-500/20">K</div>
                <span class="sidebar-logo-text font-bold text-lg text-white tracking-wide">KAIROS</span>
            </div>
        </div>

        <nav class="flex-1 overflow-y-auto py-6 px-3 space-y-6">
            
            <div>
                <p class="group-label text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 px-3">Principal</p>
                <ul class="space-y-1">
                    <li>
                        <a href="#dashboard" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 hover:bg-slate-800 hover:text-white group relative active" title="Visão Geral">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0 group-hover:text-indigo-400 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
                            <span class="sidebar-text font-medium">Visão Geral</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div>
                <p class="group-label text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 px-3">Gestão</p>
                <ul class="space-y-1">
                    <li>
                        <a href="#establishments" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 hover:bg-slate-800 hover:text-white group" title="Clientes">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0 group-hover:text-indigo-400 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>
                            <span class="sidebar-text font-medium">Clientes</span>
                        </a>
                    </li>
                    <li>
                        <a href="#plans" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 hover:bg-slate-800 hover:text-white group" title="Planos de Assinatura">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0 group-hover:text-indigo-400 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8a1 1 0 011 1v4a1 1 0 11-2 0v-4a1 1 0 011-1zm0 0a1 1 0 001-1V5a1 1 0 10-2 0v2a1 1 0 001 1zm0 0a1 1 0 011 1v2a1 1 0 11-2 0v-2a1 1 0 011-1z" /></svg>
                            <span class="sidebar-text font-medium">Planos</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div>
                <p class="group-label text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 px-3">Sistema</p>
                <ul class="space-y-1">
                    <li>
                        <a href="#trash" class="sidebar-link flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 hover:bg-slate-800 hover:text-red-400 group" title="Lixeira">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0 group-hover:text-red-400 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m-7-10V4a1 1 0 00-1-1h-2a1 1 0 00-1 1v3M4 7h16" /></svg>
                            <span class="sidebar-text font-medium">Lixeira</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="p-4 border-t border-slate-800/50 shrink-0 bg-slate-900">
            <div class="flex items-center gap-3">
                <div class="w-9 h-9 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold text-sm shrink-0">A</div>
                <div class="sidebar-text overflow-hidden flex-1">
                    <p class="text-sm font-medium text-white truncate" id="userDisplayName">Super Admin</p>
                    <button id="logoutButtonFooter" class="text-xs text-slate-400 hover:text-red-400 transition-colors flex items-center gap-1 mt-0.5">
                        Sair da conta
                    </button>
                </div>
            </div>
        </div>

    </aside>

    <header id="fixed-header" class="flex items-center justify-between px-8 transition-all duration-300" style="margin-left: 5rem;">
        <h1 class="text-xl font-bold text-slate-800" id="pageTitle">Visão Geral</h1>
        
        <div class="flex items-center gap-4">
            <span id="userDisplayEmail" class="text-sm text-slate-500 hidden sm:block"></span>
        </div>
    </header>

    <div id="main-content-wrapper" class="flex-1 flex flex-col transition-all duration-300">
        <main class="flex-1 p-6 sm:p-8 overflow-y-auto">
            
            <section id="dashboard-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide">MRR (Mensal)</p>
                                <p class="text-2xl font-bold text-slate-800 mt-1" id="kpi-mrr">R$ 0,00</p>
                            </div>
                            <div class="p-3 bg-indigo-50 text-indigo-600 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8a1 1 0 011 1v4a1 1 0 11-2 0v-4a1 1 0 011-1zm0 0a1 1 0 001-1V5a1 1 0 10-2 0v2a1 1 0 001 1zm0 0a1 1 0 011 1v2a1 1 0 11-2 0v-2a1 1 0 011-1z" /></svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Ativos</p>
                                <p class="text-2xl font-bold text-slate-800 mt-1" id="kpi-active">0</p>
                            </div>
                            <div class="p-3 bg-emerald-50 text-emerald-600 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Churn Rate</p>
                                <p class="text-2xl font-bold text-slate-800 mt-1" id="kpi-churn">0%</p>
                            </div>
                            <div class="p-3 bg-rose-50 text-rose-600 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>
                            </div>
                        </div>
                    </div>
                     <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Atenção</p>
                                <p class="text-2xl font-bold text-slate-800 mt-1" id="kpi-attention">0</p>
                            </div>
                            <div class="p-3 bg-amber-50 text-amber-600 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 lg:col-span-2">
                        <h3 class="text-lg font-bold text-slate-800 mb-4">Novos Assinantes</h3>
                        <div class="relative h-64 w-full">
                            <canvas id="growthChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <h3 class="text-lg font-bold text-slate-800 mb-4">Renovações Próximas</h3>
                        <div class="overflow-y-auto max-h-64">
                            <table class="min-w-full text-sm text-left">
                                <tbody id="attentionListTable" class="divide-y divide-slate-100"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="establishments-section" class="hidden animate-fade-in-up">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-slate-800">Clientes</h2>
                        <p class="text-sm text-slate-500">Gerencie o acesso e planos dos estabelecimentos.</p>
                    </div>
                    <button data-action="open-create-modal" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2.5 px-5 rounded-lg shadow-sm transition-colors flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                        Novo Cliente
                    </button>
                </div>

                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6">
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                        <div class="col-span-1 sm:col-span-2 lg:col-span-1">
                            <label class="block text-xs font-semibold text-slate-500 mb-1.5">Buscar</label>
                            <div class="relative">
                                <svg class="absolute left-3 top-2.5 h-5 w-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                                <input type="text" id="filterSearch" placeholder="Nome, ID ou E-mail" class="pl-10 w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow">
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-slate-500 mb-1.5">Status</label>
                            <select id="filterStatus" class="w-full p-2 border border-slate-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500">
                                <option value="all">Todos</option>
                                <option value="active" selected>Ativos</option>
                                <option value="inactive">Inativos</option>
                                <option value="deleted">Lixeira</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-semibold text-slate-500 mb-1.5">Plano</label>
                            <select id="filterPlan" class="w-full p-2 border border-slate-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500">
                                <option value="all">Todos</option>
                            </select>
                        </div>
                         <div>
                            <button id="clearFiltersBtn" class="w-full py-2 px-3 text-sm text-slate-600 hover:text-red-600 font-medium border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors">
                                Limpar Filtros
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-slate-200">
                            <thead class="bg-slate-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" data-sort="name">Cliente <span class="sort-icon ml-1 text-slate-400">↕</span></th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" data-sort="planId">Plano <span class="sort-icon ml-1 text-slate-400">↕</span></th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" data-sort="createdAt">Cadastro <span class="sort-icon ml-1 text-slate-400">↕</span></th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase tracking-wider">App</th>
                                    <th class="px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase tracking-wider">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="establishmentsList" class="bg-white divide-y divide-slate-200 text-sm"></tbody>
                        </table>
                    </div>
                    <div id="paginationControls" class="bg-white px-4 py-3 border-t border-slate-200 flex items-center justify-between sm:px-6">
                         <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                             <p class="text-sm text-slate-700">Exibindo <span id="pageStart" class="font-bold">0</span> a <span id="pageEnd" class="font-bold">0</span> de <span id="totalItems" class="font-bold">0</span></p>
                             <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
                                 <button id="prevPageBtn" class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                                     <span class="sr-only">Anterior</span>
                                     <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" /></svg>
                                 </button>
                                 <button id="nextPageBtn" class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                                     <span class="sr-only">Próxima</span>
                                     <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg>
                                 </button>
                             </nav>
                         </div>
                    </div>
                </div>
            </section>

            <section id="trash-section" class="hidden animate-fade-in-up">
                 <h2 class="text-2xl font-bold text-slate-800 mb-6">Lixeira</h2>
                 <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                     <div class="overflow-x-auto">
                         <table class="min-w-full divide-y divide-slate-200">
                             <thead class="bg-slate-50">
                                 <tr>
                                     <th class="px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase">Nome/ID</th>
                                     <th class="px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase">Data Exclusão</th>
                                     <th class="px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase">Ações</th>
                                 </tr>
                             </thead>
                             <tbody id="trashList" class="bg-white divide-y divide-slate-200 text-sm"></tbody>
                         </table>
                     </div>
                 </div>
            </section>

            <section id="plans-section" class="hidden animate-fade-in-up">
                 <div class="flex justify-between items-center mb-6">
                     <h2 class="text-2xl font-bold text-slate-800">Planos de Assinatura</h2>
                     <button data-action="open-plan-modal" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2.5 px-5 rounded-lg shadow-sm transition-colors">
                         + Novo Plano
                     </button>
                 </div>
                 <div id="plansList" class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"></div>
            </section>

        </main>
    </div>

    <div id="establishmentSlideOver" class="relative z-50 hidden" aria-labelledby="slide-over-title" role="dialog" aria-modal="true">
        <div id="slideOverBackdrop" class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity opacity-0"></div>
        <div class="fixed inset-0 overflow-hidden">
          <div class="absolute inset-0 overflow-hidden">
            <div class="pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10">
              <div id="slideOverPanel" class="pointer-events-auto w-screen max-w-xl transform transition ease-in-out duration-500 translate-x-full bg-white shadow-2xl flex flex-col h-full">
                
                <div class="flex h-16 items-center justify-between px-6 bg-slate-900 text-white shadow-md shrink-0">
                  <h2 class="text-lg font-semibold tracking-wide" id="slideOverTitle">Novo Cliente</h2>
                  <button type="button" data-action="close-modal" class="text-slate-400 hover:text-white transition-colors focus:outline-none">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                  </button>
                </div>
      
                <div class="flex-1 overflow-y-auto px-6 py-8 bg-slate-50">
                  <form id="establishmentForm" class="space-y-8">
                    <input type="hidden" id="editEstablishmentId">
                    
                    <div id="access-links-container" class="hidden bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Links de Acesso</h3>
                        <div class="grid gap-4">
                            <div>
                                <label class="block text-xs font-medium text-slate-600 mb-1.5">Agendamento</label>
                                <div class="flex shadow-sm rounded-lg overflow-hidden">
                                    <input type="text" id="schedulingLink" readonly class="w-full p-2 text-xs bg-slate-50 text-slate-600 border border-r-0 border-slate-300">
                                    <button type="button" data-action="copy-link" data-target="schedulingLink" class="px-3 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 border border-l-0 border-indigo-200 font-semibold text-xs transition-colors">Copiar</button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-slate-600 mb-1.5">Painel Admin</label>
                                <div class="flex shadow-sm rounded-lg overflow-hidden">
                                    <input type="text" id="adminLink" readonly class="w-full p-2 text-xs bg-slate-50 text-slate-600 border border-r-0 border-slate-300">
                                    <button type="button" data-action="copy-link" data-target="adminLink" class="px-3 bg-indigo-50 text-indigo-600 hover:bg-indigo-100 border border-l-0 border-indigo-200 font-semibold text-xs transition-colors">Copiar</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Dados Básicos</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="establishmentName" class="block text-sm font-medium text-slate-700 mb-1">Nome do Negócio</label>
                                <input type="text" id="establishmentName" class="w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow" required>
                            </div>
                            <div>
                                <label for="establishmentId" class="block text-sm font-medium text-slate-700 mb-1">URL Personalizada (Slug)</label>
                                <div class="flex rounded-lg shadow-sm">
                                    <span class="inline-flex items-center px-3 rounded-l-lg border border-r-0 border-slate-300 bg-slate-50 text-slate-500 text-sm">kairos.com/</span>
                                    <input type="text" id="establishmentId" class="flex-1 p-2.5 border border-slate-300 rounded-r-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow" required>
                                </div>
                                <p class="mt-1.5 text-xs text-slate-400">Este ID define o link de acesso. Evite caracteres especiais.</p>
                            </div>
                        </div>
                    </div>

                    <div id="owner-credentials-container" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Acesso do Proprietário</h3>
                        <div class="grid grid-cols-1 gap-4">
                             <div>
                                <label for="ownerEmail" class="block text-sm font-medium text-slate-700 mb-1">E-mail</label>
                                <input type="email" id="ownerEmail" class="w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label for="ownerPassword" class="block text-sm font-medium text-slate-700 mb-1">Senha Inicial</label>
                                <input type="password" id="ownerPassword" class="w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Assinatura</h3>
                        <div class="grid grid-cols-2 gap-4">
                             <div class="col-span-2 sm:col-span-1">
                                <label for="subscriptionPlan" class="block text-sm font-medium text-slate-700 mb-1">Plano</label>
                                <select id="subscriptionPlan" class="w-full p-2.5 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500"></select>
                            </div>
                            <div class="col-span-2 sm:col-span-1">
                                <label for="subscriptionExpiry" class="block text-sm font-medium text-slate-700 mb-1">Vencimento</label>
                                <input type="date" id="subscriptionExpiry" class="w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Módulos Liberados</h3>
                        <div id="modulesContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-3"></div>
                    </div>
                  </form>
                </div>
      
                <div class="border-t border-slate-200 px-6 py-4 bg-white shrink-0 flex justify-end gap-3">
                   <button type="button" data-action="close-modal" class="px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors">Cancelar</button>
                   <button type="submit" form="establishmentForm" class="px-6 py-2 text-sm font-bold text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 shadow-sm transition-colors">Salvar</button>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>

    <div id="planModal" class="modal fixed inset-0 bg-slate-900/50 backdrop-blur-sm items-center justify-center p-4">
        <div class="modal-content bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <h2 id="planModalTitle" class="text-xl font-bold text-slate-800 p-6 border-b border-slate-100">Novo Plano</h2>
             <form id="planForm" class="p-6 space-y-6 overflow-y-auto">
                 <input type="hidden" id="editPlanId">
                 <div>
                    <label for="planName" class="block text-sm font-medium text-slate-700 mb-1">Nome do Plano</label>
                    <input type="text" id="planName" class="w-full p-2.5 border border-slate-300 rounded-lg" required>
                 </div>
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                     <div>
                        <label for="planPrice" class="block text-sm font-medium text-slate-700 mb-1">Preço (R$)</label>
                        <input type="number" id="planPrice" step="0.01" class="w-full p-2.5 border border-slate-300 rounded-lg" required>
                    </div>
                    <div>
                        <label for="planMaxProfessionals" class="block text-sm font-medium text-slate-700 mb-1">Máx. Profs</label>
                        <input type="number" id="planMaxProfessionals" class="w-full p-2.5 border border-slate-300 rounded-lg" required>
                    </div>
                     <div>
                        <label for="planMaxUsers" class="block text-sm font-medium text-slate-700 mb-1">Máx. Users</label>
                        <input type="number" id="planMaxUsers" class="w-full p-2.5 border border-slate-300 rounded-lg" required>
                    </div>
                 </div>
                 <div>
                     <h3 class="text-sm font-medium text-slate-700 mb-3">Módulos Permitidos</h3>
                     <div id="planModulesContainer" class="grid grid-cols-2 sm:grid-cols-3 gap-3"></div>
                 </div>
             </form>
            <div class="mt-auto p-6 border-t border-slate-100 flex justify-end gap-3 bg-slate-50 rounded-b-xl">
                <button type="button" data-action="close-plan-modal" class="px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50">Cancelar</button>
                <button type="submit" form="planForm" class="px-6 py-2 text-sm font-bold text-white bg-emerald-600 rounded-lg hover:bg-emerald-700">Salvar Plano</button>
            </div>
        </div>
    </div>

    <div id="toast-container" class="fixed bottom-5 right-5 z-[100] space-y-2"></div>

</body>
</html>