import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               *//* empty css                */import{a as i}from"./firebase-config-BCzB3QOS.js";import{signInWithEmailAndPassword as d,signOut as m,sendPasswordResetEmail as c}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";const u=document.getElementById("loginForm"),t=document.getElementById("btn-login"),o=document.getElementById("errorMessage");u.addEventListener("submit",async s=>{s.preventDefault(),o.style.display="none",t.disabled=!0,t.textContent="Entrando...";try{const e=document.getElementById("email").value,l=document.getElementById("password").value;if((await(await d(i,e,l)).user.getIdTokenResult()).claims.establishmentId)window.location.href="app.html";else throw new Error("PERMISSAO_NEGADA")}catch(e){console.error(e),o.style.display="block",o.textContent=e.message==="PERMISSAO_NEGADA"?"Usuário sem permissão.":"Erro ao entrar. Verifique dados.",e.message==="PERMISSAO_NEGADA"&&await m(i)}finally{t.disabled=!1,t.textContent="ENTRAR"}});const E=document.getElementById("resetForm"),n=document.getElementById("btn-send-reset"),r=document.getElementById("resetMessage"),a=document.getElementById("resetError");E.addEventListener("submit",async s=>{s.preventDefault(),r.style.display="none",a.style.display="none",n.disabled=!0,n.textContent="Enviando...";try{await c(i,document.getElementById("resetEmail").value),r.textContent="Link enviado! Verifique seu e-mail.",r.style.display="block"}catch(e){console.error(e),a.style.display="block",a.textContent="Erro ao enviar. Verifique o e-mail."}finally{n.disabled=!1,n.textContent="Enviar Link"}});
