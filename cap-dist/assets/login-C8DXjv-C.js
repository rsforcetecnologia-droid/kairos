import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css               *//* empty css                */import{a as s}from"./firebase-config-BeTHj08_.js";import{setPersistence as d,browserLocalPersistence as m,signInWithEmailAndPassword as c,signOut as u,sendPasswordResetEmail as E}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/11.6.1/firebase-storage.js";import"https://www.gstatic.com/firebasejs/11.6.1/firebase-messaging.js";const y=document.getElementById("loginForm"),t=document.getElementById("btn-login"),r=document.getElementById("errorMessage");y.addEventListener("submit",async o=>{o.preventDefault(),r.style.display="none",t.disabled=!0,t.textContent="Entrando...";try{const e=document.getElementById("email").value,l=document.getElementById("password").value;if(await d(s,m),(await(await c(s,e,l)).user.getIdTokenResult(!0)).claims.establishmentId)window.location.href="app.html";else throw new Error("PERMISSAO_NEGADA")}catch(e){console.error(e),r.style.display="block",r.textContent=e.message==="PERMISSAO_NEGADA"?"Usuário sem permissão de acesso.":"Erro ao entrar. Verifique e-mail e senha.",e.message==="PERMISSAO_NEGADA"&&await u(s)}finally{t.disabled=!1,t.textContent="ENTRAR"}});const g=document.getElementById("resetForm"),n=document.getElementById("btn-send-reset"),a=document.getElementById("resetMessage"),i=document.getElementById("resetError");g.addEventListener("submit",async o=>{o.preventDefault(),a.style.display="none",i.style.display="none",n.disabled=!0,n.textContent="Enviando...";try{await E(s,document.getElementById("resetEmail").value),a.textContent="Link enviado! Verifique seu e-mail.",a.style.display="block"}catch(e){console.error(e),i.style.display="block",i.textContent="Erro ao enviar. Verifique o e-mail."}finally{n.disabled=!1,n.textContent="Enviar Link"}});
